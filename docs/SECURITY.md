# Security Policy - セキュリティポリシー

## 🔒 サポートされているバージョン

現在セキュリティアップデートが提供されているバージョンです。

| Version | Supported          |
| ------- | ------------------ |
| 1.0.x   | :white_check_mark: |
| < 1.0   | :x:                |

## 🚨 脆弱性の報告

暗号通貨取引システムという性質上、セキュリティは最重要課題です。
脆弱性を発見した場合は、以下の手順で報告してください。

### 報告方法

**⚠️ 重要: 脆弱性を公開Issueで報告しないでください**

1. **メール報告**: security@yourproject.com (準備中)
2. **GitHub Security Advisory**: GitHub のプライベート報告機能を使用
3. **緊急時**: 直接メンテナーに連絡

### 報告に含めるべき情報

- 脆弱性の詳細な説明
- 再現手順
- 影響範囲とリスクレベル
- 可能であれば、修正案や回避策

### 報告後の流れ

1. **24時間以内**: 報告の受領確認
2. **48時間以内**: 初期調査と重要度評価
3. **1週間以内**: 詳細調査と修正計画の策定
4. **状況に応じて**: 修正版のリリース

## 🛡️ セキュリティ対策

### 実装済み対策

- **認証**: Supabase Auth + JWT トークン
- **データベース**: Row Level Security (RLS)
- **API**: レート制限とCORS設定
- **暗号化**: API キーの暗号化保存
- **入力検証**: 全エンドポイントでの厳格な検証

### 開発者向けセキュリティガイドライン

#### 1. 機密情報の管理

```bash
# ❌ 絶対にやってはいけない
API_KEY = "your-secret-key"

# ✅ 環境変数を使用
API_KEY = os.getenv("API_KEY")
```

#### 2. 金額計算

```python
# ❌ 浮動小数点数は使用禁止
price = 1000.1 + 0.2

# ✅ Decimal型を使用
from decimal import Decimal
price = Decimal('1000.1') + Decimal('0.2')
```

#### 3. SQLインジェクション対策

```python
# ❌ 文字列結合は危険
query = f"SELECT * FROM users WHERE id = {user_id}"

# ✅ パラメータ化クエリを使用
query = "SELECT * FROM users WHERE id = %s"
cursor.execute(query, (user_id,))
```

#### 4. XSS対策

```typescript
// ❌ 生のHTMLを直接挿入
dangerouslySetInnerHTML={{__html: userInput}}

// ✅ サニタイズまたは安全な方法を使用
{escapeHtml(userInput)}
```

### 定期的なセキュリティチェック

- **依存関係**: `pip-audit`, `npm audit`
- **静的解析**: `bandit`, `ESLint security rules`
- **コードレビュー**: 全PRでセキュリティ観点のチェック

## 📋 セキュリティチェックリスト

新機能実装時のセキュリティチェックリスト：

- [ ] 機密情報（APIキー、パスワード等）がハードコードされていない
- [ ] 入力値検証が適切に実装されている
- [ ] SQL インジェクション対策済み
- [ ] XSS対策済み
- [ ] 認証・認可が適切に実装されている
- [ ] 金額計算にDecimal型を使用している
- [ ] エラーメッセージに機密情報が含まれていない
- [ ] ログに機密情報が出力されていない

## 🎯 セキュリティ目標

- **機密性**: 顧客の取引情報と資産を保護
- **完全性**: 取引データの正確性を保証
- **可用性**: システムの継続的な運用
- **透明性**: セキュリティ対策の可視化

## 📞 連絡先

セキュリティに関する質問や懸念がある場合：

- GitHub Issues: 一般的なセキュリティ質問
- Security Advisory: 脆弱性報告
- Email: security@yourproject.com (準備中)

---

**私たちは、セキュリティを最優先に考え、継続的な改善に取り組んでいます。**
